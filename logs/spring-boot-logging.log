2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper- Cache Hit Ratio [com.dw.mapper.PosSettingMapper]: 0.0
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper.queryByKey- ==>  Preparing: SELECT * FROM tb_pos_setting WHERE POS_KEY=? FOR UPDATE 
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper.queryByKey- ==> Parameters: NETTY_SERVICE_PORT(String)
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper.queryByKey- <==      Total: 1
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper- Cache Hit Ratio [com.dw.mapper.PosSettingMapper]: 0.0
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper.queryByKey- ==>  Preparing: SELECT * FROM tb_pos_setting WHERE POS_KEY=? FOR UPDATE 
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper.queryByKey- ==> Parameters: SERVER_IP(String)
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosSettingMapper.queryByKey- <==      Total: 1
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSettingMapper.getPosSetting- ==>  Preparing: select ID,POS_KEY,group_concat(POS_VALUE order by POS_VALUE) POS_VALUE,group_concat(POS_DESCRIPT order by POS_VALUE) POS_DESCRIPT from tb_pos_setting group by POS_KEY 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSettingMapper.getPosSetting- ==> Parameters: 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSettingMapper.getPosSetting- <==      Total: 78
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.LanguageConfigMapper- Cache Hit Ratio [com.dw.mapper.LanguageConfigMapper]: 0.0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.LanguageConfigMapper.getLanguageConfig- ==>  Preparing: select * from tb_language_config where 1 = 1 and LANG_COUNTRY = ? 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.LanguageConfigMapper.getLanguageConfig- ==> Parameters: ZH_HK(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.LanguageConfigMapper.getLanguageConfig- <==      Total: 371
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosOutletMapper- Cache Hit Ratio [com.dw.mapper.PosOutletMapper]: 0.0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosOutletMapper.getOutletList- ==>  Preparing: select * from tb_pos_outlet where outlet=? and isreservation ='Y'; 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosOutletMapper.getOutletList- ==> Parameters: 300101(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosOutletMapper.getOutletList- <==      Total: 1
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosOutletMapper- Cache Hit Ratio [com.dw.mapper.PosOutletMapper]: 0.5
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGenphMapper- Cache Hit Ratio [com.dw.mapper.PosGenphMapper]: 0.0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGenphMapper.getGenphList- ==>  Preparing: select * from tb_pos_genph where outlet=? and G_DATE=? 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGenphMapper.getGenphList- ==> Parameters: 300101(String), 2018-06-05(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGenphMapper.getGenphList- <==      Total: 0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGeneralMapper- Cache Hit Ratio [com.dw.mapper.PosGeneralMapper]: 0.0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGeneralMapper.getGeneralList- ==>  Preparing: select * from tb_pos_general where outlet=? and G_COUNT=? 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGeneralMapper.getGeneralList- ==> Parameters: 300101(String), 02(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosGeneralMapper.getGeneralList- <==      Total: 1
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,REGION_ID AS regionId,OUTLET AS outlet,CODE AS code,`NAME` AS `name`,NAME2 AS name2,NAME3 AS name3,NAME4 AS name4,PRINT_DESC AS printDesc,SORT AS sort,ISVALID AS isvalid,STIME AS stime,ETIME AS etime,ISSERV AS isserv,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_mem_period WHERE (ISVALID = ? AND ((STIME>ETIME and (STIME <= '10:16' or ETIME>'10:16')) or (STIME<ETIME and STIME<='10:16' AND ETIME > '10:16') )) 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==> Parameters: Y(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.MemPeriodMapper.selectList- <==      Total: 1
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSetmealMapper- Cache Hit Ratio [com.dw.mapper.PosSetmealMapper]: 0.0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSetmealMapper.getSetmealList- ==>  Preparing: select a.*,b.ITEM_CODE,b.ADD_PRICE,b.CAT_PERC,b.CAN_CHANGE,b.DESC1,b.DESC2,b.DESC3,b.DESC4,b.ITEM_IMG,b.PRN,b.DISCONT from ( SELECT CODE,S_GROUP,GP_DESC1,GP_DESC2,GP_DESC3,GP_DESC4,count(*) GP_COUNT,S_COUNT,IS_HOLDON FROM tb_pos_setmeal GROUP BY code, s_group, S_COUNT,IS_HOLDON ) a left join ( SELECT a.CODE,a.S_GROUP,a.ITEM_CODE,IFNULL(a.ADD_PRICE,0.00) as ADD_PRICE,a.CAT_PERC,a.CAN_CHANGE,b.DESC1,b.DESC2,b.DESC3,b.DESC4,b.ITEM_IMG,b.PRN,b.DISCONT FROM tb_pos_setmeal AS a left join tb_pos_item b on a.ITEM_CODE=b.ITEM_CODE ) b on a.code = b.code and a.S_GROUP = b.S_GROUP ORDER BY a.code,a.s_group, b.ITEM_CODE; 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSetmealMapper.getSetmealList- ==> Parameters: 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosSetmealMapper.getSetmealList- <==      Total: 150
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonList- ==>  Preparing: select a.DESCHK,a.DESCCN,a.DESCEN,a.DESCOT,a.BUTTON_IMG,a.ACTIVE_PERIOD,d.ITEM_CODE,d.DESC1,d.DESC2,d.DESC3,d.DESC4,ifnull(e.PRICE1,d.price1) as PRICE1, ifnull(f.ORG_PRICE, ifnull(e.PRICE1,d.price1)) ORG_PRICE,d.ITEM_IMG,d.SERVICE,d.PRN,d.DISCONT,d.COMB_ID,d.CATT,d.ATT_MAX,d.ATT_MIN,d.IOPEN from tb_pos_topbutton a left join tb_pos_page b on a.id=b.TB_ID left join tb_pos_pagecont c on b.id=c.PAGE_INDEX left join ( select * FROM tb_pos_item where 1=1 and discont!='2' and ( (include = 'FALSE' and item_code in (select item_code from tb_pos_items where outlet =? )) or (include = 'TRUE' and item_code not in (select item_code from tb_pos_items where outlet =? )) ) ) d on c.ITEM_CODE=d.ITEM_CODE left join tb_pos_price e on d.item_code=e.item_code left join ( select a.item_code,ifnull(b.price1,a.price1) as org_price from tb_pos_item a left join (select * from tb_pos_price where outlet=? and iopen='FALSE') b on a.item_code=b.item_code ) f on ifnull(d.remarks,'')=f.item_code where CURRENT_DATE() between DATE_FORMAT(a.STARTDATE,'%Y-%m-%d') and DATE_FORMAT(a.ENDDATE,'%Y-%m-%d') and a.display='1' and a.day2='1' order by cast(a.disseq as signed),c.ITEM_CODE; 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonList- ==> Parameters: 300101(String), 300101(String), 300101(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonList- <==      Total: 368
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosAttHeadMapper- Cache Hit Ratio [com.dw.mapper.PosAttHeadMapper]: 0.0
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosAttHeadMapper.queryList- ==>  Preparing: SELECT * FROM tb_pos_atthead WHERE CODE != '00' and display = 1 ORDER BY sort 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosAttHeadMapper.queryList- ==> Parameters: 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosAttHeadMapper.queryList- <==      Total: 10
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosCombMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,M_ITEM_CODE AS mItemCode,V_ITEM_CODE AS vItemCode,V_ITEM_PRICE AS vItemPrice,`STATUS` AS `status`,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime,COMB_GROUP AS combGroup FROM tb_pos_comb WHERE (STATUS = ?) 
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosCombMapper.selectList- ==> Parameters: 1(String)
2018/06/05-10:16 [Thread-13] DEBUG com.dw.mapper.PosCombMapper.selectList- <==      Total: 29
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosStaffMapper- Cache Hit Ratio [com.dw.mapper.PosStaffMapper]: 0.0
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosStaffMapper.staffLogin- ==>  Preparing: select * from tb_pos_staff where 1 =1 and CODE = ? and PASSWORD = ? 
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosStaffMapper.staffLogin- ==> Parameters: 0000001(String), -40-30-39-94115-1083384(String)
2018/06/05-10:16 [JavaFX Application Thread] DEBUG com.dw.mapper.PosStaffMapper.staffLogin- <==      Total: 1
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosStaffMapper- Cache Hit Ratio [com.dw.mapper.PosStaffMapper]: 0.0
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosStaffMapper.getStaffRightList- ==>  Preparing: select distinct * from ( SELECT su.S_RIGHT as rightKey, r.`DESC` as rightValue FROM tb_pos_staffu su LEFT JOIN tb_pos_staff s ON s.OUTLINE = su.OUTLINE AND su.CODE = s.CODE LEFT JOIN tb_pos_staffright r on su.OUTLINE = r.OUTLINE and su.S_RIGHT = r.CODE WHERE s.CODE = ? AND su.R_GRADE = 1 union all SELECT su.S_RIGHT as rightKey, r.`DESC` as rightValue FROM tb_pos_staffu su LEFT JOIN tb_pos_staffgrp g ON g.OUTLINE = su.OUTLINE and su.CODE = g.S_GROUP LEFT JOIN tb_pos_staffright r on su.OUTLINE = r.OUTLINE and su.S_RIGHT = r.CODE where g.STAFF = ? AND su.R_GRADE = 1) a; 
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosStaffMapper.getStaffRightList- ==> Parameters: 0000001(String), 0000001(String)
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosStaffMapper.getStaffRightList- <==      Total: 18
2018/06/05-10:16 [Thread-15] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:16 [Thread-15] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:16 [Thread-15] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosTableActionMapper.delete- ==>  Preparing: DELETE FROM tb_pos_table_action WHERE (STATION_ID = ?) 
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosTableActionMapper.delete- ==> Parameters: 01(String)
2018/06/05-10:16 [Thread-14] DEBUG com.dw.mapper.PosTableActionMapper.delete- <==    Updates: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==>  Preparing: SELECT * FROM tb_pos_tran WHERE TABLE_NUM=? AND TRAN_TYPE=? ORDER BY VERSION DESC 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==> Parameters: 12(String), N(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- <==      Total: 1
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.selectList- ==>  Preparing: SELECT id,TABLE_NUM AS tableNum,OP_STAFF AS opStaff,OP_STAFF_NAME AS opStaffName,STATION_ID AS stationId,T_TIME AS tTime,OPERATE_TYPE AS operateType,REMARKS AS remarks FROM tb_pos_table_action WHERE (TABLE_NUM = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.selectList- ==> Parameters: 12(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.insert- ==>  Preparing: INSERT INTO tb_pos_table_action ( id, TABLE_NUM, OP_STAFF, OP_STAFF_NAME, STATION_ID, T_TIME ) VALUES ( ?, ?, ?, ?, ?, ? ) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.insert- ==> Parameters: 60937b7dee4d4d49b64bba209014f195(String), 12(String), 0000001(String), Gwen(String), 01(String), 2018-06-05 10:17:06.575(Timestamp)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.insert- <==    Updates: 1
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- ==>  Preparing: SELECT o.ID,o.REF_NUM, o.SUB_REF, o.TABLE_NUM, o.ITEM_CODE, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC1) as desc1, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC2) as desc2, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC3) as desc3, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC4) as desc4, i.IPRINT as iPrint,at.attDesc1, at.attDesc2, at.attDesc3,IFNULL(o.ORDER_DISC,0.00) as orderDisc,o.SERV_COST as servCost,o.KIC_MESS kicMess, DATE_FORMAT(concat(o.T_DATE, ' ', o.T_TIME),'%Y-%m-%d %H:%i:%s') as tDate, at.attDesc4, o.QTY, o.CANCEL, o.FREE, o.STAFF, s.NAME1 AS staffDesc, o.T_TIME, o.AMT,o.ITEM_IDX, o.UNIT_PRICE, o.CHANGE_AMT,o.KCONFIRM, o.SERVICE, i.COMB_ID, at.attCode,at.subtractQty,settingPrice,o.KIC_MESS,o.SETMEAL_CODE as setMealCode,o.SETMEAL setMeal,o.TA as sgroup,o.SEP_CHAR as sepChar,i.PRN as itemPrn,DATE_FORMAT(o.T_TIME,"%H:%i") as orderTime,s.NAME1 as staffName, IFNULL(l.urgeCount, 0) urgeCount,o.CART_ID as cartId,o.CAT_DISC,o.ITEM_DISC FROM tb_pos_order o LEFT JOIN tb_pos_item i ON o.ITEM_CODE = i.ITEM_CODE LEFT JOIN tb_pos_staff s ON o.STAFF = s.CODE LEFT JOIN ( SELECT at.ITEM_IDX, GROUP_CONCAT(IFNULL(a.DESC1,''), t.DESC1 Separator '/') attDesc1, GROUP_CONCAT(IFNULL(a.DESC2,''), t.DESC2 Separator '/')attDesc2, GROUP_CONCAT(IFNULL(a.DESC3,''), t.DESC3 Separator '/')attDesc3, GROUP_CONCAT(IFNULL(a.DESC4,''), t.DESC4 Separator '/')attDesc4, GROUP_CONCAT(at.ATT_GROUP, ':', at.ATT_CODE, ':', ifnull(at.ACTION_CODE,'') Separator '@') attCode, GROUP_CONCAT(t.CAL_QTY Separator '@') subtractQty, GROUP_CONCAT((case when ifnull(s.CAL_AMOUNT,'') ='' then CASE when t.CAL_TYPE = 'M' then (concat('*', t.CAL_AMOUNT)) when t.CAL_TYPE = 'S' and t.AMT_PRO = 'AMT' then (concat('-', t.CAL_AMOUNT)) when t.CAL_TYPE = 'S' and t.AMT_PRO = 'PRO' then (concat('/', t.CAL_AMOUNT)) else concat('+', t.CAL_AMOUNT) end when ifnull(s.CAL_AMOUNT,0.00)>=0.00 then concat('+', s.CAL_AMOUNT) else concat('-', s.CAL_AMOUNT) END) Separator '@') settingPrice FROM tb_pos_t_att at LEFT JOIN tb_pos_att t ON at.ATT_GROUP = t.A_GROUP AND at.ATT_CODE = t.CODE LEFT JOIN tb_pos_attaction a on at.ACTION_CODE = a.ACTION_CODE LEFT JOIN tb_pos_attsetting s on at.ATT_GROUP = s.A_GROUP and at.ATT_CODE=s.code and at.ACTION_CODe=s.ACTION_CODE GROUP BY at.ITEM_IDX ) at on at.ITEM_IDX = o.ITEM_IDX LEFT JOIN (SELECT T_INDEX,MAX(QTY1) AS urgeCount FROM tb_pos_log WHERE LOG_TYPE = 'URGE' AND OUTLET = ? AND REF_NUM = ? GROUP BY T_INDEX) l on o.ITEM_IDX = l.T_INDEX WHERE o.OUTLET = ? AND o.REF_NUM = ? AND o.SUB_REF = ? and o.type = ? and o.QTY+o.CANCEL > 0 order by o.ITEM_IDX; 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- ==> Parameters: 300101(String), 00916(String), 300101(String), 00916(String), 00(String), N(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- <==      Total: 6
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,REGION_ID AS regionId,OUTLET AS outlet,CODE AS code,`NAME` AS `name`,NAME2 AS name2,NAME3 AS name3,NAME4 AS name4,PRINT_DESC AS printDesc,SORT AS sort,ISVALID AS isvalid,STIME AS stime,ETIME AS etime,ISSERV AS isserv,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_mem_period WHERE (ISVALID = ? AND ((STIME>ETIME and (STIME <= '10:17' or ETIME>'10:17')) or (STIME<ETIME and STIME<='10:17' AND ETIME > '10:17') )) 
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==> Parameters: Y(String)
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.MemPeriodMapper.selectList- <==      Total: 1
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosSetmealMapper- Cache Hit Ratio [com.dw.mapper.PosSetmealMapper]: 0.5
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonList- ==>  Preparing: select a.DESCHK,a.DESCCN,a.DESCEN,a.DESCOT,a.BUTTON_IMG,a.ACTIVE_PERIOD,d.ITEM_CODE,d.DESC1,d.DESC2,d.DESC3,d.DESC4,ifnull(e.PRICE1,d.price1) as PRICE1, ifnull(f.ORG_PRICE, ifnull(e.PRICE1,d.price1)) ORG_PRICE,d.ITEM_IMG,d.SERVICE,d.PRN,d.DISCONT,d.COMB_ID,d.CATT,d.ATT_MAX,d.ATT_MIN,d.IOPEN from tb_pos_topbutton a left join tb_pos_page b on a.id=b.TB_ID left join tb_pos_pagecont c on b.id=c.PAGE_INDEX left join ( select * FROM tb_pos_item where 1=1 and discont!='2' and ( (include = 'FALSE' and item_code in (select item_code from tb_pos_items where outlet =? )) or (include = 'TRUE' and item_code not in (select item_code from tb_pos_items where outlet =? )) ) ) d on c.ITEM_CODE=d.ITEM_CODE left join tb_pos_price e on d.item_code=e.item_code left join ( select a.item_code,ifnull(b.price1,a.price1) as org_price from tb_pos_item a left join (select * from tb_pos_price where outlet=? and iopen='FALSE') b on a.item_code=b.item_code ) f on ifnull(d.remarks,'')=f.item_code where CURRENT_DATE() between DATE_FORMAT(a.STARTDATE,'%Y-%m-%d') and DATE_FORMAT(a.ENDDATE,'%Y-%m-%d') and a.display='1' and a.day2='1' order by cast(a.disseq as signed),c.ITEM_CODE; 
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonList- ==> Parameters: 300101(String), 300101(String), 300101(String)
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonList- <==      Total: 368
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosAttHeadMapper- Cache Hit Ratio [com.dw.mapper.PosAttHeadMapper]: 0.5
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosCombMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,M_ITEM_CODE AS mItemCode,V_ITEM_CODE AS vItemCode,V_ITEM_PRICE AS vItemPrice,`STATUS` AS `status`,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime,COMB_GROUP AS combGroup FROM tb_pos_comb WHERE (STATUS = ?) 
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosCombMapper.selectList- ==> Parameters: 1(String)
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosCombMapper.selectList- <==      Total: 29
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosOrderAddressMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,ADDRESS_ID AS addressId,TELEPHONE AS telephone,ADDRESS AS address,LINK_MAN AS linkMan,PHASE AS phase,TOWER AS tower,`FLOOR` AS `floor`,ROOM AS room,REMARK AS remark,REF_NUM AS refNum,SUB_REF AS subRef,IN_DATE AS inDate,OUTLET AS outlet,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_order_address WHERE (REF_NUM = ? AND SUB_REF = ? AND IN_DATE = ? AND OUTLET = ?) 
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosOrderAddressMapper.selectList- ==> Parameters: 00916(String), 00(String), 2018-06-04 00:00:00.0(Timestamp), 300101(String)
2018/06/05-10:17 [Thread-16] DEBUG com.dw.mapper.PosOrderAddressMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1714(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 13
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1786(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 43
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 981(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 22
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1785(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 9
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1443(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 10
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1769(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 10
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1038(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 9
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1730(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 6
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1751(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 14
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper- Cache Hit Ratio [com.dw.mapper.PosAttMapper]: 0.0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==>  Preparing: SELECT * FROM tb_pos_att WHERE A_GROUP=? ORDER BY A_GROUP,CODE 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- ==> Parameters: 1874(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosAttMapper.queryListByHeadCode- <==      Total: 7
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.delete- ==>  Preparing: DELETE FROM tb_pos_table_action WHERE (TABLE_NUM = ? AND STATION_ID = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.delete- ==> Parameters: 12(String), 01(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.delete- <==    Updates: 1
2018/06/05-10:17 [Thread-17] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-17] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:17 [Thread-17] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.delete- ==>  Preparing: DELETE FROM tb_pos_table_action WHERE (TABLE_NUM = ? AND STATION_ID = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.delete- ==> Parameters: 12(String), 01(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTableActionMapper.delete- <==    Updates: 0
2018/06/05-10:17 [Thread-18] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-18] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:17 [Thread-18] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:17 [Thread-19] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,REGION_ID AS regionId,OUTLET AS outlet,CODE AS code,`NAME` AS `name`,NAME2 AS name2,NAME3 AS name3,NAME4 AS name4,PRINT_DESC AS printDesc,SORT AS sort,ISVALID AS isvalid,STIME AS stime,ETIME AS etime,ISSERV AS isserv,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_mem_period WHERE (ISVALID = ?) 
2018/06/05-10:17 [Thread-19] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==> Parameters: Y(String)
2018/06/05-10:17 [Thread-19] DEBUG com.dw.mapper.MemPeriodMapper.selectList- <==      Total: 3
2018/06/05-10:17 [Thread-19] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonListNoCache- ==>  Preparing: select a.DESCHK,a.DESCCN,a.DESCEN,a.DESCOT,a.BUTTON_IMG,a.ACTIVE_PERIOD,d.ITEM_CODE,d.DESC1,d.DESC2,d.DESC3,d.DESC4,ifnull(e.PRICE1,d.price1) as PRICE1, ifnull(f.ORG_PRICE, ifnull(e.PRICE1,d.price1)) ORG_PRICE,d.ITEM_IMG,d.SERVICE,d.PRN,d.DISCONT,d.COMB_ID,d.CATT,d.ATT_MAX,d.ATT_MIN,d.IOPEN from tb_pos_topbutton a left join tb_pos_page b on a.id=b.TB_ID left join tb_pos_pagecont c on b.id=c.PAGE_INDEX left join ( select * FROM tb_pos_item where 1=1 and discont!='2' and ( (include = 'FALSE' and item_code in (select item_code from tb_pos_items where outlet =? )) or (include = 'TRUE' and item_code not in (select item_code from tb_pos_items where outlet =? )) ) ) d on c.ITEM_CODE=d.ITEM_CODE left join tb_pos_price e on d.item_code=e.item_code left join ( select a.item_code,ifnull(b.price1,a.price1) as org_price from tb_pos_item a left join (select * from tb_pos_price where outlet=? and iopen='FALSE') b on a.item_code=b.item_code ) f on ifnull(d.remarks,'')=f.item_code order by cast(a.disseq as signed),c.ITEM_CODE; 
2018/06/05-10:17 [Thread-19] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonListNoCache- ==> Parameters: 300101(String), 300101(String), 300101(String)
2018/06/05-10:17 [Thread-19] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonListNoCache- <==      Total: 368
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L008(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L006(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L002(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L006(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L002(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L024(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L025(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L026(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L034(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L032(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L031(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L028(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L001(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 1
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L002(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L003(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 1
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L003(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 1
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,OUTLINE AS outline,OUTLET AS outlet,ITEM_CODE AS itemCode,PRICE_TYPE AS priceType,SUMMARY AS summary,SERVICE AS service,BILL_DISC AS billDisc,IOPEN AS iopen,PRICE1 AS price1,PRICE2 AS price2,PRICE3 AS price3,PRICE4 AS price4,PRICE5 AS price5,PRICE6 AS price6,PRICE7 AS price7,PRICE8 AS price8,PRICE9 AS price9,REMARKS AS remarks,UPDATED_BY AS updatedBy,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_pos_price WHERE (OUTLET = ? AND ITEM_CODE = ? AND IOPEN = ?) 
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- ==> Parameters: 300101(String), L004(String), FALSE(String)
2018/06/05-10:17 [JavaFX Application Thread] DEBUG com.dw.mapper.PosPriceMapper.selectList- <==      Total: 0
2018/06/05-10:17 [Thread-20] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-20] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:17 [Thread-20] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:17 [Thread-21] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-21] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:17 [Thread-22] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-22] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:17 [Thread-22] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:17 [Thread-23] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-23] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:17 [Thread-23] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:17 [Thread-21] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:17 [Thread-24] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:17 [Thread-24] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:17 [Thread-24] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:18 [Thread-25] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-25] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-25] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-26] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-26] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:18 [Thread-26] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:18 [Thread-27] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-27] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-27] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-28] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-28] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:18 [Thread-28] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:18 [Thread-29] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-29] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-29] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-30] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-30] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:18 [Thread-30] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:18 [Thread-31] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-31] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-31] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-32] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-32] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:18 [Thread-32] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:18 [Thread-33] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-33] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-33] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-34] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-34] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:18 [Thread-34] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:18 [Thread-35] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-35] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-35] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-36] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-36] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:18 [Thread-36] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:18 [Thread-37] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-37] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-37] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-38] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-38] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:18 [Thread-38] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:18 [Thread-39] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-39] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-39] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-40] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-40] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:18 [Thread-40] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:18 [Thread-41] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-41] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-41] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:18 [Thread-42] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-42] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:18 [Thread-42] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:18 [Thread-43] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:18 [Thread-43] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:18 [Thread-43] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:25 [Thread-44] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:25 [Thread-44] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:25 [Thread-44] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:25 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==>  Preparing: SELECT * FROM tb_pos_tran WHERE TABLE_NUM=? AND TRAN_TYPE=? ORDER BY VERSION DESC 
2018/06/05-10:25 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==> Parameters: 1(String), N(String)
2018/06/05-10:25 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- <==      Total: 0
2018/06/05-10:28 [Thread-45] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==>  Preparing: SELECT id,VERSION AS version,REGION_ID AS regionId,OUTLET AS outlet,CODE AS code,`NAME` AS `name`,NAME2 AS name2,NAME3 AS name3,NAME4 AS name4,PRINT_DESC AS printDesc,SORT AS sort,ISVALID AS isvalid,STIME AS stime,ETIME AS etime,ISSERV AS isserv,REMARK1 AS remark1,REMARK2 AS remark2,REMARK3 AS remark3,LAST_UPDATE_NAME_ID AS lastUpdateNameId,LAST_UPDATE_TIME AS lastUpdateTime FROM tb_mem_period WHERE (ISVALID = ?) 
2018/06/05-10:28 [Thread-45] DEBUG com.dw.mapper.MemPeriodMapper.selectList- ==> Parameters: Y(String)
2018/06/05-10:28 [Thread-45] DEBUG com.dw.mapper.MemPeriodMapper.selectList- <==      Total: 3
2018/06/05-10:28 [Thread-45] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonListNoCache- ==>  Preparing: select a.DESCHK,a.DESCCN,a.DESCEN,a.DESCOT,a.BUTTON_IMG,a.ACTIVE_PERIOD,d.ITEM_CODE,d.DESC1,d.DESC2,d.DESC3,d.DESC4,ifnull(e.PRICE1,d.price1) as PRICE1, ifnull(f.ORG_PRICE, ifnull(e.PRICE1,d.price1)) ORG_PRICE,d.ITEM_IMG,d.SERVICE,d.PRN,d.DISCONT,d.COMB_ID,d.CATT,d.ATT_MAX,d.ATT_MIN,d.IOPEN from tb_pos_topbutton a left join tb_pos_page b on a.id=b.TB_ID left join tb_pos_pagecont c on b.id=c.PAGE_INDEX left join ( select * FROM tb_pos_item where 1=1 and discont!='2' and ( (include = 'FALSE' and item_code in (select item_code from tb_pos_items where outlet =? )) or (include = 'TRUE' and item_code not in (select item_code from tb_pos_items where outlet =? )) ) ) d on c.ITEM_CODE=d.ITEM_CODE left join tb_pos_price e on d.item_code=e.item_code left join ( select a.item_code,ifnull(b.price1,a.price1) as org_price from tb_pos_item a left join (select * from tb_pos_price where outlet=? and iopen='FALSE') b on a.item_code=b.item_code ) f on ifnull(d.remarks,'')=f.item_code order by cast(a.disseq as signed),c.ITEM_CODE; 
2018/06/05-10:28 [Thread-45] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonListNoCache- ==> Parameters: 300101(String), 300101(String), 300101(String)
2018/06/05-10:28 [Thread-45] DEBUG com.dw.mapper.TopButtonMapper.getTopButtonListNoCache- <==      Total: 368
2018/06/05-10:28 [Thread-46] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:28 [Thread-46] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:28 [Thread-46] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:28 [Thread-47] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:28 [Thread-47] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:28 [Thread-47] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:28 [Thread-48] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:28 [Thread-48] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:28 [Thread-48] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:28 [Thread-49] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:28 [Thread-49] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:28 [Thread-49] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:28 [Thread-50] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:28 [Thread-50] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:28 [Thread-50] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==>  Preparing: SELECT * FROM tb_pos_tran WHERE TABLE_NUM=? AND TRAN_TYPE=? ORDER BY VERSION DESC 
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==> Parameters: 52(String), N(String)
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- <==      Total: 1
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- ==>  Preparing: SELECT o.ID,o.REF_NUM, o.SUB_REF, o.TABLE_NUM, o.ITEM_CODE, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC1) as desc1, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC2) as desc2, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC3) as desc3, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC4) as desc4, i.IPRINT as iPrint,at.attDesc1, at.attDesc2, at.attDesc3,IFNULL(o.ORDER_DISC,0.00) as orderDisc,o.SERV_COST as servCost,o.KIC_MESS kicMess, DATE_FORMAT(concat(o.T_DATE, ' ', o.T_TIME),'%Y-%m-%d %H:%i:%s') as tDate, at.attDesc4, o.QTY, o.CANCEL, o.FREE, o.STAFF, s.NAME1 AS staffDesc, o.T_TIME, o.AMT,o.ITEM_IDX, o.UNIT_PRICE, o.CHANGE_AMT,o.KCONFIRM, o.SERVICE, i.COMB_ID, at.attCode,at.subtractQty,settingPrice,o.KIC_MESS,o.SETMEAL_CODE as setMealCode,o.SETMEAL setMeal,o.TA as sgroup,o.SEP_CHAR as sepChar,i.PRN as itemPrn,DATE_FORMAT(o.T_TIME,"%H:%i") as orderTime,s.NAME1 as staffName, IFNULL(l.urgeCount, 0) urgeCount,o.CART_ID as cartId,o.CAT_DISC,o.ITEM_DISC FROM tb_pos_order o LEFT JOIN tb_pos_item i ON o.ITEM_CODE = i.ITEM_CODE LEFT JOIN tb_pos_staff s ON o.STAFF = s.CODE LEFT JOIN ( SELECT at.ITEM_IDX, GROUP_CONCAT(IFNULL(a.DESC1,''), t.DESC1 Separator '/') attDesc1, GROUP_CONCAT(IFNULL(a.DESC2,''), t.DESC2 Separator '/')attDesc2, GROUP_CONCAT(IFNULL(a.DESC3,''), t.DESC3 Separator '/')attDesc3, GROUP_CONCAT(IFNULL(a.DESC4,''), t.DESC4 Separator '/')attDesc4, GROUP_CONCAT(at.ATT_GROUP, ':', at.ATT_CODE, ':', ifnull(at.ACTION_CODE,'') Separator '@') attCode, GROUP_CONCAT(t.CAL_QTY Separator '@') subtractQty, GROUP_CONCAT((case when ifnull(s.CAL_AMOUNT,'') ='' then CASE when t.CAL_TYPE = 'M' then (concat('*', t.CAL_AMOUNT)) when t.CAL_TYPE = 'S' and t.AMT_PRO = 'AMT' then (concat('-', t.CAL_AMOUNT)) when t.CAL_TYPE = 'S' and t.AMT_PRO = 'PRO' then (concat('/', t.CAL_AMOUNT)) else concat('+', t.CAL_AMOUNT) end when ifnull(s.CAL_AMOUNT,0.00)>=0.00 then concat('+', s.CAL_AMOUNT) else concat('-', s.CAL_AMOUNT) END) Separator '@') settingPrice FROM tb_pos_t_att at LEFT JOIN tb_pos_att t ON at.ATT_GROUP = t.A_GROUP AND at.ATT_CODE = t.CODE LEFT JOIN tb_pos_attaction a on at.ACTION_CODE = a.ACTION_CODE LEFT JOIN tb_pos_attsetting s on at.ATT_GROUP = s.A_GROUP and at.ATT_CODE=s.code and at.ACTION_CODe=s.ACTION_CODE GROUP BY at.ITEM_IDX ) at on at.ITEM_IDX = o.ITEM_IDX LEFT JOIN (SELECT T_INDEX,MAX(QTY1) AS urgeCount FROM tb_pos_log WHERE LOG_TYPE = 'URGE' AND OUTLET = ? AND REF_NUM = ? GROUP BY T_INDEX) l on o.ITEM_IDX = l.T_INDEX WHERE o.OUTLET = ? AND o.REF_NUM = ? AND o.SUB_REF = ? and o.type = ? and o.QTY+o.CANCEL > 0 order by o.ITEM_IDX; 
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- ==> Parameters: 300101(String), 00919(String), 300101(String), 00919(String), 00(String), N(String)
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- <==      Total: 14
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==>  Preparing: SELECT * FROM tb_pos_tran WHERE TABLE_NUM=? AND TRAN_TYPE=? ORDER BY VERSION DESC 
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- ==> Parameters: 12(String), N(String)
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosTranMapper.queryListByTable- <==      Total: 1
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- ==>  Preparing: SELECT o.ID,o.REF_NUM, o.SUB_REF, o.TABLE_NUM, o.ITEM_CODE, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC1) as desc1, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC2) as desc2, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC3) as desc3, IFNULL(o.RECEIVE_ITEM_NAME,i.DESC4) as desc4, i.IPRINT as iPrint,at.attDesc1, at.attDesc2, at.attDesc3,IFNULL(o.ORDER_DISC,0.00) as orderDisc,o.SERV_COST as servCost,o.KIC_MESS kicMess, DATE_FORMAT(concat(o.T_DATE, ' ', o.T_TIME),'%Y-%m-%d %H:%i:%s') as tDate, at.attDesc4, o.QTY, o.CANCEL, o.FREE, o.STAFF, s.NAME1 AS staffDesc, o.T_TIME, o.AMT,o.ITEM_IDX, o.UNIT_PRICE, o.CHANGE_AMT,o.KCONFIRM, o.SERVICE, i.COMB_ID, at.attCode,at.subtractQty,settingPrice,o.KIC_MESS,o.SETMEAL_CODE as setMealCode,o.SETMEAL setMeal,o.TA as sgroup,o.SEP_CHAR as sepChar,i.PRN as itemPrn,DATE_FORMAT(o.T_TIME,"%H:%i") as orderTime,s.NAME1 as staffName, IFNULL(l.urgeCount, 0) urgeCount,o.CART_ID as cartId,o.CAT_DISC,o.ITEM_DISC FROM tb_pos_order o LEFT JOIN tb_pos_item i ON o.ITEM_CODE = i.ITEM_CODE LEFT JOIN tb_pos_staff s ON o.STAFF = s.CODE LEFT JOIN ( SELECT at.ITEM_IDX, GROUP_CONCAT(IFNULL(a.DESC1,''), t.DESC1 Separator '/') attDesc1, GROUP_CONCAT(IFNULL(a.DESC2,''), t.DESC2 Separator '/')attDesc2, GROUP_CONCAT(IFNULL(a.DESC3,''), t.DESC3 Separator '/')attDesc3, GROUP_CONCAT(IFNULL(a.DESC4,''), t.DESC4 Separator '/')attDesc4, GROUP_CONCAT(at.ATT_GROUP, ':', at.ATT_CODE, ':', ifnull(at.ACTION_CODE,'') Separator '@') attCode, GROUP_CONCAT(t.CAL_QTY Separator '@') subtractQty, GROUP_CONCAT((case when ifnull(s.CAL_AMOUNT,'') ='' then CASE when t.CAL_TYPE = 'M' then (concat('*', t.CAL_AMOUNT)) when t.CAL_TYPE = 'S' and t.AMT_PRO = 'AMT' then (concat('-', t.CAL_AMOUNT)) when t.CAL_TYPE = 'S' and t.AMT_PRO = 'PRO' then (concat('/', t.CAL_AMOUNT)) else concat('+', t.CAL_AMOUNT) end when ifnull(s.CAL_AMOUNT,0.00)>=0.00 then concat('+', s.CAL_AMOUNT) else concat('-', s.CAL_AMOUNT) END) Separator '@') settingPrice FROM tb_pos_t_att at LEFT JOIN tb_pos_att t ON at.ATT_GROUP = t.A_GROUP AND at.ATT_CODE = t.CODE LEFT JOIN tb_pos_attaction a on at.ACTION_CODE = a.ACTION_CODE LEFT JOIN tb_pos_attsetting s on at.ATT_GROUP = s.A_GROUP and at.ATT_CODE=s.code and at.ACTION_CODe=s.ACTION_CODE GROUP BY at.ITEM_IDX ) at on at.ITEM_IDX = o.ITEM_IDX LEFT JOIN (SELECT T_INDEX,MAX(QTY1) AS urgeCount FROM tb_pos_log WHERE LOG_TYPE = 'URGE' AND OUTLET = ? AND REF_NUM = ? GROUP BY T_INDEX) l on o.ITEM_IDX = l.T_INDEX WHERE o.OUTLET = ? AND o.REF_NUM = ? AND o.SUB_REF = ? and o.type = ? and o.QTY+o.CANCEL > 0 order by o.ITEM_IDX; 
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- ==> Parameters: 300101(String), 00916(String), 300101(String), 00916(String), 00(String), N(String)
2018/06/05-10:30 [JavaFX Application Thread] DEBUG com.dw.mapper.PosOrderMapper.getOrderList- <==      Total: 6
2018/06/05-10:37 [Thread-51] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:37 [Thread-51] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:37 [Thread-51] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:37 [Thread-52] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:37 [Thread-52] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), C(String)
2018/06/05-10:37 [Thread-52] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 0
2018/06/05-10:37 [Thread-53] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:37 [Thread-53] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), B(String)
2018/06/05-10:37 [Thread-53] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 2
2018/06/05-10:37 [Thread-54] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==>  Preparing: select tt.*,s.table_type as TABLE_STATE,IFNULL(s.PERSON,0) as CURRENT_PERSION ,s.IN_TIME,case LOCATE('-',tt.ROOM_NUM) when 0 then tt.ROOM_NUM else left(tt.ROOM_NUM,LOCATE('-',tt.ROOM_NUM)-1) end parentTableNUm from tb_pos_table tt left join ( SELECT distinct t.*, 'B' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM NOT IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) UNION SELECT distinct t.*,'C' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and (r.SETTLED is null or r.SETTLED = '') AND r.REF_NUM IN ( SELECT distinct o.REF_NUM FROM tb_pos_order o WHERE o.REF_NUM = r.REF_NUM AND o.SUB_REF = r.SUB_REF AND o.TYPE = 'N' and (o.qty+o.cancel)>0 ) union SELECT distinct t.*, 'D' AS table_type,r.PERSON ,r.IN_TIME FROM tb_pos_table t INNER JOIN tb_pos_tran r ON t.ROOM_NUM = r.TABLE_NUM AND r.TRAN_TYPE = 'N' and r.SETTLED = 'FALSE' ) as s on s.ROOM_NUM = tt.ROOM_NUM where 1 = 1 and (tt.remark1='1' or tt.remarks='0') and tt.PAGE_NUMBER = ? and tt.FLOOR = ? order by f_get_Room(parentTableNUm),tt.ROOM_NUM 
2018/06/05-10:37 [Thread-54] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- ==> Parameters: 1(Integer), A(String)
2018/06/05-10:37 [Thread-54] DEBUG com.dw.mapper.PosTableMapper.getTablesByFloor- <==      Total: 28
